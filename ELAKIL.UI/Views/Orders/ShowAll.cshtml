@if (User.Identity.IsAuthenticated && !User.IsInRole("Admin"))
{
    @using ELAKIL.Business.Entities
    @model List<Order>
    @inject IOrderService orderService

    <head>
        <style>
            #topbar, header {
                position: static !important
            }
            .card * {
                font-family: Arial;
                color: black;
            }
            ul {
                list-style: none
            }
        </style>
    </head>

    @if (Model.Count() == 0)
    {
        <h2 style="color: red">No orders yet</h2>
    }
    else
    {
        <ul class="m-5 p-0">
            @foreach (Order order in Model)
            {
                <li class="mb-3">
                    <div class="card">
                        <div class="card-header">
                            Order # @order.Id | Placed at @order.OrderDate | Deliver at @order.DeliverDate |  Status: @order.Status
                        </div>
                        <div class="card-body">

                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    @foreach (OrderLine orderLine in order.OrderLines)
                                    {
                                        <div class="card mb-2 overflow-hidden">
                                            <div class="row">
                                                <div class="col-3 p-0">
                                                    <img class="w-100" src="@orderLine.Meal.Image" />
                                                </div>
                                                <div class="col-9 p-0">
                                                    <div class="card">
                                                        <div class="card-header">
                                                            <h4>@orderLine.Meal.Name</h4>
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <h5>QT. @orderLine.Quantity</h5>
                                                        <p>@orderLine.Meal.Description</p>
                                                        <div class=""></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </li>
                            </ul>
                        </div>
                        <div class="card-footer">
                            Order Total Price: @await orderService.CalcOrderPriceAsync(order.Id)
                        </div>
                    </div>
                </li>
            }
        </ul>
    }
}